<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Registration</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- Favicon -->
        <link rel="shortcut icon" type="image/x-icon" href="assets/img/favicon.png">
		
		<!-- all css here -->
        <link rel="stylesheet" href="assets/css/bootstrap.min.css">
        <link rel="stylesheet" href="assets/css/magnific-popup.css">
        <link rel="stylesheet" href="assets/css/animate.css">
        <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
        <link rel="stylesheet" href="assets/css/slinky.min.css">
        <link rel="stylesheet" href="assets/css/meanmenu.min.css">
        <link rel="stylesheet" href="assets/css/slick.css">
        <link rel="stylesheet" href="assets/css/ionicons.min.css">
        <link rel="stylesheet" href="assets/css/bundle.css">
        <link rel="stylesheet" href="assets/css/style.css">
        <link rel="stylesheet" href="assets/css/responsive.css">
        <script src="assets/js/vendor/modernizr-2.8.3.min.js"></script>
    </head>
    <body>
        <!--[if lt IE 8]>
        <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
        <!-- header start -->
        <div class="wrapper">
            
            <div th:replace="common/navbar"></div>
            
            <div class="breadcrumb-area pt-50 pb-100" style="background-image: url('https://www.nortonandtownsend.co.uk/wp-content/uploads/2017/05/Wedding-banners-02.jpg'); background-size:cover; background-repeat: no-repeat;"></div>
            </div>
            <!-- register-area start -->
            <div class="register-area ptb-70">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-12 col-12 col-lg-6 col-xl-6 ml-auto mr-auto">
                            <div class="login">
                                <div class="login-form-container">
                                	<p th:if="${errorMsg != null}" th:text="${errorMsg}" style="margin-bottom: 30px; color:red; font-weight:bold;"></p>
                                    <div class="loginForm">
                                        <form th:object="${user}" id="regForm" method="POST">
                                        	<input type="email" th:field="*{email}" id="email" placeholder="Email Address">
                                            <input type="password" th:field="*{password}" id="password1" placeholder="Password">
                                            <input type="password" th:field="*{passwordConfirmation}" id="password2" placeholder="Password Confirmation">
                                            <p id="jsError" style="color:red;"></p>
                                            <div class="button-box">
                                                <input onclick="checkRequirements(); return false;" type="submit" value="Register" class="default-btn">
                                                <div class="login-toggle-btn">
                                                    <a href="/login">Already Registered?</a>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div th:replace="common/footer"> </div>
            
        </div>
		
		
		
		
		
		
		
		
		
		<!-- all js here -->
        <script src="assets/js/vendor/jquery-1.12.0.min.js"></script>
        <script src="assets/js/popper.js"></script>
        <script src="assets/js/bootstrap.min.js"></script>
        <script src="assets/js/jquery.magnific-popup.min.js"></script>
        <script src="assets/js/isotope.pkgd.min.js"></script>
        <script src="assets/js/imagesloaded.pkgd.min.js"></script>
        <script src="assets/js/jquery.counterup.min.js"></script>
        <script src="assets/js/waypoints.min.js"></script>
        <script src="assets/js/slinky.min.js"></script>
        <script src="assets/js/ajax-mail.js"></script>
        <script src="assets/js/owl.carousel.min.js"></script>
        <script src="assets/js/plugins.js"></script>
        <script type="text/javascript">
            // grab an element
            var myElement = document.querySelector(".intelligent-header");
            // construct an instance of Headroom, passing the element
            var headroom  = new Headroom(myElement);
            // initialise
            headroom.init(); 
        </script>
        <script src="assets/js/main.js"></script>
        
        <script type='text/javascript'>
		    function checkRequirements() {
		    	// Check if all fields are filled in
		    	let f1 = (document.getElementById('email').value.length) > 0;
		    	let f2 = (document.getElementById('password1').value.length) > 0;
		    	let f3 = (document.getElementById('password2').value.length) > 0;
		    	let thereAreEmptyFields = !(f1 && f2 && f3);
		    	if(thereAreEmptyFields) {
		    		document.getElementById('jsError').innerHTML = "Please fill all the fields.";
		    		return;
		    	} else { document.getElementById('jsError').innerHTML = ""};
		    	
		    	let passwordsMatch = (document.getElementById('password1').value == document.getElementById('password2').value)
		        let passwordContainsNumber = new RegExp(".*[0-9].*").test(document.getElementById('password1').value);
		        let passwordContainsLetter = new RegExp(".*[a-zA-Z].*").test(document.getElementById('password1').value);
		        
		        if(passwordsMatch && passwordContainsNumber && passwordContainsLetter) {
		        	document.getElementById("regForm").submit();
		        } else { 
		        	
		        	document.getElementById('jsError').innerHTML = "Password must be minimum of 6 characters and contain at least one letter and one number.";

		        	// This MUST BE LATTER so that it can override passwordContains related errors.
		        	if(!passwordsMatch) {
		        		document.getElementById('jsError').innerHTML = "Passwords must match.";
		        	}
		        	
		        }
		    }
		</script>
    </body>
</html>
